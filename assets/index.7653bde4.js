import{_ as F,r as b,o as E,G as M,H as O,c as i,d as c,e,i as p,w,t as d,u as a,h as T,B as S,z as k,F as z,f as A,j as H,p as P,l as G,I as J,D as K,J as f,K as L,L as q,M as Q,N as W,b as m}from"./index.059b74ae.js";import{m as X}from"./mixin.d5ce98a8.js";const o=v=>(P("data-v-16140c26"),v=v(),G(),v),Y={class:"courseContainer"},Z={class:"courseInfoTop"},ee={class:"info-container"},te={class:"route"},ae={class:"route-item",style:{cursor:"pointer"}},se=T("\u8BFE\u7A0B"),oe={class:"route-item"},ie={class:"route-item",style:{cursor:"pointer"}},ce={class:"route-item"},ne={class:"route-item"},de={class:"name"},re={class:"info"},le=o(()=>e("div",{class:"Avat"},[e("img",{src:"https://oss.xuexiluxian.cn/xiaoluxian-vcr/4820e28844b04e9391cba571b5e1c7ae.png",alt:""})],-1)),pe={class:"teacherName"},he={class:"name-item"},ue=o(()=>e("img",{src:"https://www.xuexiluxian.cn/resources/images/teacherStart.png",alt:""},null,-1)),fe=o(()=>e("li",{class:"name-item"},"\u91D1\u724C\u8BB2\u5E08",-1)),_e={class:"access"},me=o(()=>e("li",{class:"access-item"},"\u96BE\u5EA6",-1)),ve={class:"access-item"},xe=o(()=>e("li",{class:"access-item"},"\xB7",-1)),ge=o(()=>e("li",{class:"access-item"},"\u65F6\u957F",-1)),be={class:"access-item"},we=o(()=>e("li",{class:"access-item"},"\xB7",-1)),ke=o(()=>e("li",{class:"access-item"},"\u5B66\u4E60\u4EBA\u6570",-1)),ye={class:"access-item"},Ce=o(()=>e("li",{class:"access-item"},"\xB7",-1)),Ie=o(()=>e("li",{class:"access-item"},"\u7EFC\u5408\u8BC4\u5206",-1)),Ne=o(()=>e("li",{class:"access-item"},"10.00",-1)),ze={class:"info-nav"},Ae={class:"nav-container"},Re={key:0,class:"course"},Be={class:"main"},Se=o(()=>e("div",{class:"desc"}," \u8BE5\u8BFE\u7A0B\u6682\u65E0\u4ECB\u7ECD ",-1)),Le=o(()=>e("button",{class:"btn-item active"},"\u7ACB\u5373\u8D2D\u4E70",-1)),Te={class:"chapterName"},Ue={class:"chapterDesc"},Ve={class:"videos"},$e={class:"video-itemIcon"},De={class:"item-name"},je=o(()=>e("span",{class:"shipin"},"\u89C6\u9891\uFF1A",-1)),Fe={class:"chapterName"},Ee={key:0,class:"free"},Me=["onClick"],Oe=o(()=>e("div",{class:"clearfloat"},null,-1)),He={key:1},Pe={key:0},Ge={class:"source"},Je={class:"downloadCourse"},Ke=["onClick"],qe={key:1},Qe={__name:"index",setup(v){let{funType:U}=X(),n=b(!0),V=J(),y=K();const R=V.params.id;let l=b({}),B=b([]),C=b([]);E(()=>{M({courseId:R}).then(s=>{l.value=s.data.data,B.value=s.data.data.bizCourseChapters,C.value=s.data.data.bizCourseAttachments})});const I=O(),$=s=>{if(!I.token){f.info({message:"\u8BF7\u767B\u5F55!"}),y.push("/login");return}L({courseId:s.courseId}).then(r=>{if(!r.data.data.hasAuth){f.info({message:"\u8BF7\u5B81\u8D2D\u4E70\u8BE5\u8BFE\u7A0B\u53EF\u4EE5\u4E0B\u8F7D\u8D44\u6599!"});return}q({courseId:s.courseId,attachmentId:s.id}).then(h=>{const x=new Blob([h]);let u=s.attachmentName,g=s.attachmentUrl;const N=g.substring(g.lastIndexOf("."));u=u+N;const t=document.createElement("a");t.download=u,t.target="_blank",t.style.display="none",t.href=URL.createObjectURL(x),document.body.appendChild(t),t.click(),URL.revokeObjectURL(t.href),document.body.removeChild(t)})})},D=(s,r)=>{if(!I.token){f.info({message:"\u8BF7\u767B\u5F55!"}),y.push("/login");return}L({courseId:s.courseId}).then(h=>{if(!h.data.data.hasAuth){f.info({message:"\u8BF7\u5B81\u8D2D\u4E70\u8BE5\u8BFE\u7A0B\u53EF\u4EE5\u89C2\u770B\u89C6\u9891!"});return}y.push({path:`/course-play/${s.courseId}/${r}`})})},j=()=>{Q().then(s=>{let r=s.data.token;W({courseId:R,memberId:I.userInfo.id},r).then(h=>{if(h.meta.code==="200"){f.success({message:"\u52A0\u5165\u8D2D\u7269\u8F66\u6210\u529F!"});return}else f.info({message:"\u6DFB\u52A0\u5931\u8D25\uFF5E\u8BE5\u8BFE\u7A0B\u5DF2\u7ECF\u5728\u8D2D\u7269\u8F66\u4E2D\u4E86!"})})})};return(s,r)=>{const h=m("router-link"),x=m("ArrowRightBold"),u=m("el-icon"),g=m("VideoCameraFilled"),N=m("el-empty");return i(),c("div",Y,[e("div",Z,[e("div",ee,[e("ul",te,[e("li",ae,[p(h,{to:"/course",style:{color:"#fff"}},{default:w(()=>[se]),_:1})]),e("li",oe,[p(u,null,{default:w(()=>[p(x)]),_:1})]),e("li",ie,d(a(l).discountPrice===0?"\u514D\u8D39\u8BFE":"\u4F1A\u5458\u8BFE\u7A0B"),1),e("li",ce,[p(u,null,{default:w(()=>[p(x)]),_:1})]),e("li",ne,d(a(l).courseName),1)]),e("div",de,d(a(l).courseName),1),e("div",re,[le,e("ul",pe,[e("li",he,[T(d(a(l).courseName)+" ",1),ue]),fe]),e("ul",_e,[me,e("li",ve,d(a(U)(a(l).courseLevel)),1),xe,ge,e("li",be,d(a(l).totalHour)+"\u4E2A\u5C0F\u65F6",1),we,ke,e("li",ye,d(a(l).purchaseCounter+a(l).purchaseCnt)+"\u4EBA",1),Ce,Ie,Ne])])])]),e("div",ze,[e("div",Ae,[e("div",{class:"chapter-item",onClick:r[0]||(r[0]=t=>S(n)?n.value=!0:n=!0)},[e("div",{class:k(a(n)?"active1":"")},"\u7AE0\u8282",2),e("div",{class:k(["line",a(n)?"active2":""])},null,2)]),e("div",{class:"chapter-item",onClick:r[1]||(r[1]=t=>S(n)?n.value=!1:n=!1)},[e("div",{class:k(a(n)?"":"active1")},"\u4E0B\u8F7D\u8D44\u6599",2),e("div",{class:k(["line",a(n)?"":"active2"])},null,2)])])]),a(n)?(i(),c("div",Re,[e("div",Be,[e("div",{class:"introduction"},[Se,e("div",{class:"btn"},[Le,e("button",{class:"btn-item",onClick:j},"\u52A0\u5165\u8D2D\u7269\u8F66")])]),(i(!0),c(z,null,A(a(B),t=>(i(),c("div",{class:"video",key:t.id},[e("div",Te,d(t.chapterName),1),e("div",Ue,d(t.description),1),e("ul",Ve,[(i(!0),c(z,null,A(t.children,_=>(i(),c("li",{class:"video-item",key:_.id},[e("div",$e,[p(u,null,{default:w(()=>[p(g)]),_:1})]),e("div",De,[je,e("span",Fe,d(_.chapterName),1),_.publicType===2?(i(),c("span",Ee,"\u8BD5\u770B")):H("",!0)]),e("button",{class:"btn-learn",onClick:We=>D(t,_.id)},"\u5F00\u59CB\u5B66\u4E60",8,Me),Oe]))),128))])]))),128))])])):(i(),c("div",He,[a(C).length!==0?(i(),c("div",Pe,[(i(!0),c(z,null,A(a(C),t=>(i(),c("div",{class:"down",key:t.id},[e("div",Ge,[e("span",Je,d(t.attachmentName),1),e("button",{class:"downloadbtn",onClick:_=>$(t)},"\u4E0B\u8F7D\u8D44\u6599",8,Ke)])]))),128))])):(i(),c("div",qe,[p(N,{description:"\u8BE5\u8BFE\u7A0B\u6682\u65E0\u8D44\u6599"})]))]))])}}};var Ze=F(Qe,[["__scopeId","data-v-16140c26"]]);export{Ze as default};
