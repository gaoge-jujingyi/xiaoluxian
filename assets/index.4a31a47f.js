import{_ as B,r as i,o as L,S as D,c as r,d as n,e as a,F as z,f as P,t as s,u as d,i as T,w as q,p as A,l as E,h as v,T as O,U,D as W,b as j,V as H,J as C,W as J,M as R,X}from"./index.059b74ae.js";import{u as Y}from"./cart.d313ebd5.js";const u=l=>(A("data-v-09a5a5c0"),l=l(),E(),l),Z={class:"confirmOrder"},$=u(()=>a("div",{class:"bgColor"},[a("h1",{class:"main-shopcart"},"\u786E\u8BA4\u8BA2\u5355")],-1)),G={class:"main"},K={class:"info"},Q=u(()=>a("div",{class:"head"},"\u5546\u54C1\u4FE1\u606F",-1)),aa={class:"courseInfo"},ea={class:"coursebg"},ta=["src"],oa={class:"courseName"},ia={class:"coursePrice"},sa={class:"nowprice"},da={class:"oldprice"},ca={class:"choose"},ra=v("\u652F\u4ED8\u65B9\u5F0F "),na={class:"pay"},la={class:"choosebg"},pa=["onClick"],ha={class:"foot"},ua={class:"foot-item"},xa=v("\u5E94\u4ED8"),ga={class:"unique"},fa={class:"dialogPrice"},va=v("\u652F\u4ED8\uFF1A"),_a={class:"prices"},ma={class:"codeimg"},ba=["src"],wa=u(()=>a("div",{class:"alert"},"\u8BF7\u60A8\u53CA\u65F6\u4ED8\u6B3E\uFF0C\u5DF2\u4FBF\u8BA2\u5355\u5C3D\u5FEB\u5904\u7406\uFF01",-1)),ya=u(()=>a("div",{class:"finish"},[a("div",{class:"error"},"\u652F\u4ED8\u9047\u5230\u95EE\u9898"),a("div",{class:"success"},"\u6211\u5DF2\u652F\u4ED8")],-1)),ka={__name:"index",setup(l){let p=Y();const x=i(!1);let _=i([]),g=i(0),m=i([]),b=i("\u6682\u65E0\u9009\u62E9\u652F\u4ED8\u65B9\u5F0F"),w=i("");L(()=>{D(p.orderList).then(e=>{_.value=e.data.courses,g.value=e.data.totalPrice,m.value=e.data.payModes})});let f=i(""),h=i("");const F=e=>{b.value=e.description,w.value=e.code,e.code==="alipayment"?O({courses:p.orderList,payModes:e.code}).then(o=>{f.value=o.data.payurl,h.value=o.data.orderNumber}):U({courses:p.orderList,payModes:e.code}).then(o=>{f.value=o.data.payurl,h.value=o.data.orderNumber})};let c=i("");const y=W(),S=()=>{H({orderNumber:h.value}).then(e=>{e.meta.code=="200"&&(clearInterval(c.value),C.success({message:"\u652F\u4ED8\u6210\u529F!"}),y.push("/"),k())})},I=()=>{J({orderNumber:h.value}).then(e=>{e.meta.code=="200"&&(clearInterval(c.value),C.success({message:"\u652F\u4ED8\u6210\u529F!"}),y.push("/"),k())})},N=()=>{clearInterval(c.value)},k=()=>{R().then(e=>{let o=e.data.token;X(p.select,o)})},V=()=>{w.value==="alipayment"?c.value=setInterval(S,2e3):c.value=setInterval(I,2e3),x.value=!0};return(e,o)=>{const M=j("el-dialog");return r(),n("div",Z,[$,a("div",G,[a("div",K,[Q,(r(!0),n(z,null,P(d(_),t=>(r(),n("div",{class:"info-main",key:t.id},[a("div",aa,[a("div",ea,[a("img",{src:t.courseCover,alt:""},null,8,ta)]),a("div",oa,s(t.courseName),1),a("div",ia,[a("span",sa,"\uFFE5"+s(t.discountPrice),1),a("span",da,"\uFFE5"+s(t.salePrice),1)])])]))),128)),a("div",ca,[a("h3",null,[ra,a("span",na,s(d(b)),1)]),a("div",la,[(r(!0),n(z,null,P(d(m),t=>(r(),n("span",{key:t.code,onClick:za=>F(t)},s(t.description),9,pa))),128))])]),a("ul",ha,[a("li",ua,[xa,a("span",ga,"\uFFE5"+s(d(g)),1)]),a("li",null,[a("button",{class:"btn",onClick:V},"\u786E\u8BA4\u8BA2\u5355")])])])]),T(M,{modelValue:x.value,"onUpdate:modelValue":o[0]||(o[0]=t=>x.value=t),class:"pay-dialog",width:"500px",onClose:N},{default:q(()=>[a("div",fa,[va,a("span",_a,s(d(g))+"\u5143",1)]),a("div",ma,[a("img",{src:d(f)},null,8,ba)]),wa,ya]),_:1},8,["modelValue"])])}}};var Fa=B(ka,[["__scopeId","data-v-09a5a5c0"]]);export{Fa as default};
